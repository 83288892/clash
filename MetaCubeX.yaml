### è‡ªç”¨è™šç©ºç»ˆç«¯è§„åˆ™ ###
### https://raw.githubusercontent.com/83288892/clash/main/MetaCubeX.yaml
######### é”šç‚¹ start #######
# ç­–ç•¥ç»„ç›¸å…³
#pr: &pr {type: select, proxies: [â™»ï¸ ä»£ç†æ¨¡å¼,ğŸš€ æ‰‹åŠ¨é€‰æ‹©,âœ… æ•…éšœè½¬ç§»,ğŸ”€ è‡ªåŠ¨é€‰æ‹©,â¡ï¸ ç›´è¿æ¨¡å¼,ğŸ”‚ ä¸€è‡´å‡è¡¡,ğŸ” å¾ªç¯å‡è¡¡,ğŸ’¯ ç²¾å“èŠ‚ç‚¹]}

#pr: &pr {type: select, proxies: [â™»ï¸ ä»£ç†æ¨¡å¼,ğŸš€ æ‰‹åŠ¨é€‰æ‹©,â›“ï¸ é“¾å¼ä»£ç†,âœ… æ•…éšœè½¬ç§»,ğŸ”€ è‡ªåŠ¨é€‰æ‹©,â¡ï¸ ç›´è¿æ¨¡å¼,ğŸ”‚ ä¸€è‡´å‡è¡¡,ğŸ” å¾ªç¯å‡è¡¡,ğŸ’¯ ç²¾å“èŠ‚ç‚¹,ğŸ†“ å…¬ç›ŠèŠ‚ç‚¹,ğŸŸ¥ é¦™æ¸¯èŠ‚ç‚¹,ğŸŸ¥ å°æ¹¾èŠ‚ç‚¹,ğŸ¦ ç‹®åŸèŠ‚ç‚¹,ğŸ—¾ æ—¥æœ¬èŠ‚ç‚¹,ğŸ¥’ éŸ©å›½èŠ‚ç‚¹,ğŸ—½ ç¾å›½èŠ‚ç‚¹]}

pr: &pr {type: select, proxies: [â™»ï¸ ä»£ç†æ¨¡å¼,â¡ï¸ ç›´è¿æ¨¡å¼]}

dr: &dr {type: select, proxies: [â¡ï¸ ç›´è¿æ¨¡å¼,â™»ï¸ ä»£ç†æ¨¡å¼]}
#è¿™é‡Œæ˜¯è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³çš„
p: &p {type: http, interval: 3600, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 600, lazy: true, timeout: 3000, tolerance: 100}}

# , lazy: true, timeout: 3000, tolerance: 1000

######### é”šç‚¹ end #######

# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
proxy-providers:
  Clash-XXX:
    <<: *p
    url: "https://*.com"




                                                  


mode: rule # é»˜è®¤è§„åˆ™ [rule é»˜è®¤è§„åˆ™åŒ¹é… global å…¨å±€ä»£ç† (éœ€è¦åœ¨ GLOBAL ç­–ç•¥ç»„é€‰æ‹©ä»£ç†/ç­–ç•¥) direct å…¨å±€ç›´è¿]
ipv6: true
allow-lan: true
mixed-port: 7890
unified-delay: true    #æ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼ï¼Œå»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿ
tcp-concurrent: true    #TCP å¹¶å‘
external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

geodata-mode: true
geox-url:
  geoip: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"

find-process-mode: strict    # è¿›ç¨‹åŒ¹é…æ¨¡å¼  always å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹ strict é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯ off ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
global-client-fingerprint: chrome    # å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹

# ç¼“å­˜
profile:
  store-selected: true   # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: true      # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

# åŸŸåå—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"

tun:
  enable: true
  stack: mixed
  dns-hijack:
    - "any:53"
  auto-route: true
  auto-detect-interface: true

dns:
  enable: true
  listen: :1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "geosite:geolocation-!cn":
      - "https://dns.cloudflare.com/dns-query#dns"
      - "https://dns.google/dns-query#dns"
proxies:
- name: "â¡ï¸ ç›´è¿æ¨¡å¼"
  type: direct
  udp: true

#- name: "âŒ æ–­å¼€è¿æ¥"
#  type: reject
#  udp: true

#- name: "ğŸŒ å…¨å±€æ¨¡å¼"
#  type: global
#  udp: true

#- name: "ğŸŒ åŸŸåè§£æ"
#  type: dns

                                                  
proxy-groups:

#ç­–ç•¥ # ,

  - {name: â™»ï¸ ä»£ç†æ¨¡å¼, type: select , proxies: [ğŸš€ æ‰‹åŠ¨é€‰æ‹©, â›“ï¸ é“¾å¼ä»£ç†,âœ… æ•…éšœè½¬ç§», ğŸ”€ è‡ªåŠ¨é€‰æ‹©, â¡ï¸ ç›´è¿æ¨¡å¼, ğŸ”‚ ä¸€è‡´å‡è¡¡, ğŸ” å¾ªç¯å‡è¡¡, ğŸ’¯ ç²¾å“èŠ‚ç‚¹, ğŸ†“ å…¬ç›ŠèŠ‚ç‚¹, ğŸŒ äºšæ´²åœ°åŒº]}
  - {name: ğŸš€ æ‰‹åŠ¨é€‰æ‹©, type: select , include-all-providers: true} 
  - {name: â›“ï¸ é“¾å¼ä»£ç†, type: relay , proxies: [ğŸŒ äºšæ´²åœ°åŒº, ğŸ’¯ ç²¾å“èŠ‚ç‚¹]}   #å…¥å£è‡ªåŠ¨é€‰æ‹©ï¼š ğŸŒ äºšæ´²åœ°åŒº  è½åœ°é€‰æ‹©ï¼š ğŸ’¯ ç²¾å“èŠ‚ç‚¹  
  - {name: ğŸ’¯ ç²¾å“èŠ‚ç‚¹, type: select , include-all-providers: true, filter: "(?i)ä¼˜|ç²¾|å|å“|ip|æ­‡|å…æµ"}



  
#åˆ†æµç­–ç•¥

  - {name: dns, type: select, proxies: [â™»ï¸ ä»£ç†æ¨¡å¼, ğŸš€ æ‰‹åŠ¨é€‰æ‹©]}
#  - {name: ğŸ† å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [âŒ æ–­å¼€è¿æ¥, â™»ï¸ ä»£ç†æ¨¡å¼,  â¡ï¸ ç›´è¿æ¨¡å¼]}
  - {name: ğŸŸ¥ ä¸­å›½è¿æ¥, type: select, proxies: [â¡ï¸ ç›´è¿æ¨¡å¼, â™»ï¸ ä»£ç†æ¨¡å¼]}
  - {name: â“‚ï¸ è¿œç¨‹ä»“åº“, <<: *pr }  
  - {name: â“‚ï¸ å¾®è½¯äº‘ç›˜, <<: *dr }
  - {name: â“‚ï¸ å¾®è½¯æœåŠ¡, <<: *dr }     
  - {name: ğŸ® æ¸¸æˆå¹³å°, <<: *pr }
  - {name: ğŸ¤– äººå·¥æ™ºèƒ½, <<: *pr }  
  - {name: ğŸ” è°·æ­ŒæœåŠ¡, <<: *pr }  
#  - {name: ğŸ¬ æ²¹ç®¡è§†é¢‘, <<: *pr }  
  - {name: ğŸï¸ å¥ˆé£å½±è§†, <<: *pr }    
  - {name: ğŸ è‹¹æœæœåŠ¡, <<: *dr }      
  - {name: ğŸªœ å…¶å®ƒè¿æ¥, <<: *pr}
#  - {name: â¡ï¸ ç›´è¿æ¨¡å¼, type: select, proxies: [DIRECT]}
#  - {name: âŒ æ–­å¼€è¿æ¥, type: select, proxies: [REJECT]}

#  è‡ªåŠ¨åˆ‡æ¢èŠ‚ç‚¹æ¨¡å¼

#  - {name: âœ… æ•…éšœè½¬ç§», type: fallback, include-all-providers: true} 
  - {name: âœ… æ•…éšœè½¬ç§», type: fallback, include-all-providers: true}     
  - {name: ğŸ”€ è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all-providers: true}
  - {name: ğŸ”‚ ä¸€è‡´å‡è¡¡, type: load-balance, include-all-providers: true, strategy: consistent-hashing}    
  - {name: ğŸ” å¾ªç¯å‡è¡¡, type: load-balance, include-all-providers: true, strategy: round-robin}
#åœ°åŒº  
  - {name: ğŸ†“ å…¬ç›ŠèŠ‚ç‚¹, type: url-test , include-all-providers: true, filter: "(?i)å…¬ç›Š|free"}
  - {name: ğŸŒ äºšæ´²åœ°åŒº, type: url-test , include-all-providers: true, filter: "(?i)æ¸¯|hk|hongkong|hong kong|å°|tw|taiwan|(æ–°|sg|singapore)|æ—¥|jp|japan|éŸ©|kr|korea|south korea|republic of korea|å°|in|è¶Š|vn|æ³°|th"}
#  - {name: ğŸŸ¥ é¦™æ¸¯èŠ‚ç‚¹, type: url-test , include-all-providers: true, filter: "(?i)æ¸¯|hk|hongkong|hong kong"}
#  - {name: ğŸŸ¥ å°æ¹¾èŠ‚ç‚¹, type: url-test , include-all-providers: true, filter: "(?i)å°|tw|taiwan"}
#  - {name: ğŸ¦ ç‹®åŸèŠ‚ç‚¹, type: url-test , include-all-providers: true, filter: "(?i)(æ–°|sg|singapore)"}
#  - {name: ğŸ—¾ æ—¥æœ¬èŠ‚ç‚¹, type: url-test , include-all-providers: true, filter: "(?i)æ—¥|jp|japan"}
#  - {name: ğŸ¥’ éŸ©å›½èŠ‚ç‚¹, type: url-test , include-all-providers: true, filter: "(?i)éŸ©|kr|korea|south korea|republic of korea"}
#  - {name: ğŸ—½ ç¾å›½èŠ‚ç‚¹, type: url-test , include-all-providers: true, filter: "(?i)ç¾|us|unitedstates|united states"}


# åˆ†æµè§„åˆ™
rules:
# å¹¿å‘Šæ‹¦æˆª
#  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOSITE,cn))),ğŸ† å¹¿å‘Šæ‹¦æˆª # quic
#  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOIP,CN))),ğŸ† å¹¿å‘Šæ‹¦æˆª # quic
#  - AND,((RULE-SET,anti-AD),(NOT,((RULE-SET,anti-AD-white)))),ğŸ† å¹¿å‘Šæ‹¦æˆª
#  - RULE-SET,Advertising_Classical,ğŸ† å¹¿å‘Šæ‹¦æˆª
#  - DOMAIN,tms.dingtalk.com,â™»ï¸ ä»£ç†æ¨¡å¼ #å®å®å…æµ
#  - DOMAIN,alidocs.dingtalk.com,â™»ï¸ ä»£ç†æ¨¡å¼ #å®å®å…æµ

  - GEOIP,lan,â¡ï¸ ç›´è¿æ¨¡å¼,no-resolve
  - RULE-SET,CustomProxy_domain,â™»ï¸ ä»£ç†æ¨¡å¼
  - RULE-SET,CustomDirect_domain,â¡ï¸ ç›´è¿æ¨¡å¼   
  - GEOSITE,CN,ğŸŸ¥ ä¸­å›½è¿æ¥
  - GEOSITE,steam@cn,ğŸŸ¥ ä¸­å›½è¿æ¥
  - GEOSITE,steam,ğŸ® æ¸¸æˆå¹³å°
#  - RULE-SET,Game,ğŸ® æ¸¸æˆå¹³å°   
  - GEOSITE,github,â“‚ï¸ è¿œç¨‹ä»“åº“    
  - GEOSITE,onedrive,â“‚ï¸ å¾®è½¯äº‘ç›˜
  - GEOSITE,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡  
  - GEOSITE,ehentai,â™»ï¸ ä»£ç†æ¨¡å¼ 
  - GEOSITE,telegram,â™»ï¸ ä»£ç†æ¨¡å¼
  
  - GEOSITE,openai,ğŸ¤– äººå·¥æ™ºèƒ½
  - GEOSITE,anthropic,ğŸ¤– äººå·¥æ™ºèƒ½   
  - GEOSITE,google,ğŸ” è°·æ­ŒæœåŠ¡
  - GEOSITE,google-cn,ğŸ” è°·æ­ŒæœåŠ¡
#  - GEOSITE,youtube,ğŸ¬ æ²¹ç®¡è§†é¢‘
  - GEOSITE,netflix,ğŸï¸ å¥ˆé£å½±è§†
  - GEOSITE,apple,ğŸ è‹¹æœæœåŠ¡  
  
  - RULE-SET,AntiAd_domain,ğŸŸ¥ ä¸­å›½è¿æ¥ #ç™½åå•
  - RULE-SET,anti-AD_domain,REJECT #å¹¿å‘Š
  - GEOSITE,category-ads-all,REJECT  #å¹¿å‘Š  

  - GEOSITE,geolocation-!cn,ğŸªœ å…¶å®ƒè¿æ¥

  - GEOIP,telegram,â™»ï¸ ä»£ç†æ¨¡å¼
  - GEOIP,google,ğŸ” è°·æ­ŒæœåŠ¡
  - GEOIP,netflix,ğŸï¸ å¥ˆé£å½±è§†
  - GEOIP,CN,ğŸŸ¥ ä¸­å›½è¿æ¥
  - MATCH,ğŸªœ å…¶å®ƒè¿æ¥


#  - RULE-SET,xx_ip,xx
rule-anchor:
#  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: yaml}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: yaml}

rule-providers:
# è‡ªå®šä¹‰å¸¸ç”¨åŸŸåè§„åˆ™
  CustomProxy_domain:
    <<: *domain
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/83288892/clash/main/rule/proxy.yaml"

  CustomDirect_domain:
    <<: *domain
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/83288892/clash/main/rule/direct.yaml"
# å¹¿å‘Šæ‹¦æˆª
  # anti-AD å¹¿å‘Šæ‹¦æˆªè§„åˆ™
  # https://github.com/privacy-protection-tools/anti-AD
  # å¦‚æœè¯¯æ€ç‡é«˜è¯·è‡ªè¡Œæ›´æ¢
  # RULE-SET,anti-AD_domain,REJECT  #æ‹¦æˆª
  # RULE-SET,AntiAd_domain,DIRECT #ç›´è¿
  anti-AD_domain:
    <<: *domain
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-clash.yaml"
    
# ç™½åå•
  AntiAd_domain:
    <<: *domain
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/privacy-protection-tools/dead-horse/master/anti-ad-white-for-clash.yaml"  
    
#  cn_ip:
#    <<: *ip
#    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml"
